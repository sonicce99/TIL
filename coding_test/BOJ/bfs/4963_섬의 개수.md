## Link (실버 2)        

- https://www.acmicpc.net/problem/4963  

## 내 풀이 (27472KB, 324ms)  

```js
const input = require('fs').readFileSync('/dev/stdin').toString().split('\n');
let start = 0;
const answer = [];
while(input[start] !== '0 0') {
  const [w, h] = input[start].split(' ').map(Number);
  const array = input.slice(start + 1, (start + 1) + (h + 1)).map(el => el.split(' ').map(Number));

  const graph = new Map();
  let count = 0;

  const tx = [-1, 0, 1, 1, 1, 0,-1,-1];
  const ty = [-1,-1,-1, 0, 1, 1, 1, 0];

  // make graph
  for(let y=0; y<h; y++) {
    for(let x=0; x<w; x++) {
      const value = array[y][x];
      if(value === 1) {
        const key = [x, y].join(' ');
        graph.set(key, []);
        for(let i=0; i<8; i++) {
          const newX = x + tx[i];
          const newY = y + ty[i];
          if(newY >= 0 && newX >= 0 && newY < h && newX < w) {
            if(array[newY][newX] === 1) {
              const prev = graph.get(key);
              graph.set(key, [...prev, [newX, newY]]);
            }
          }
        }
      }
    }
  }

  // make visited
  const visited = new Map();
  for(let key of graph.keys()) {
    visited.set(key, false);
  }

  for(let [key, arr] of graph) {
    const queue = [];
    let isReturn = false;

    const bfs = (nextKey) => {
      if(!visited.get(nextKey)) {
        visited.set(nextKey, true);
        const nodes = graph.get(nextKey);
        queue.push(...nodes);

        while(queue.length > 0) {
          const nKey = queue.shift().join(' ');
          bfs(nKey);
        }

        if(!isReturn) {
          count++;
          isReturn = true;
        }
      }
    }

    bfs(key);
  }

  answer.push(count);
  start += h + 1;
}

console.log(answer.join('\n'));
```

## 고수 풀이 (10672KB, 184ms)          

```javascript
const fs = require('fs');
const input = fs.readFileSync('/dev/stdin').toString().trim().split('\n');

let idx = 0;

while (true) {
    const [w, h] = input[idx++].split(" ").map(Number);
    if (w === 0) { break; }
    const map = [];
    for (let i = 0; i < h; i++) {
        map.push(input[idx++].split(' ').map(Number));
    }

    let cnt = 0;

    for (let m = 0; m < h; m++) {
        for (let n = 0; n < w; n++) {
            if (map[m][n] === 1) {
                solve(map, m, n, w, h);
                cnt++;
            }
        }
    }

    console.log(cnt);
}

function solve(map, m, n, w, h) {
    map[m][n] = -1;
    for (let dm = -1; dm < 2; dm++) {
        for (let dn = -1; dn < 2; dn++) {
            const m2 = m + dm;
            const n2 = n + dn;
            if (m2 < 0 || m2 >= h || n2 < 0 || n2 >= w) {
                continue;
            }
            if (map[m2][n2] === 1) {
                solve(map, m2, n2, w, h);
            }
        }
    }
}
```
