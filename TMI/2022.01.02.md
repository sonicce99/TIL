# async await

### async

- function ì•ì— asyncë¥¼ ë¶™ì´ë©´ í•´ë‹¹ í•¨ìˆ˜ëŠ” í•­ìƒ Promiseë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. Promiseê°€ ì•„ë‹Œ ê°’ì„ ë°˜í™˜ í•˜ë”ë¼ë„ ì´í–‰ ìƒíƒœì˜ Promise (resolved promise) ë¡œ ê°’ì„ ê°ì‹¸ ì´í–‰ëœ Promiseê°€ ë°˜í™˜ ë˜ë„ë¡ í•©ë‹ˆë‹¤.

```javascript
async function f() {
  return 1;
}

f().then(alert); // 1
```

- ëª…ì‹œì ìœ¼ë¡œ Promiseë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•œë°, ê²°ê³¼ëŠ” ë™ì¼í•©ë‹ˆë‹¤.

```javascript
async function f() {
  return Promise.resolve(1);
}

f().then(alert); // 1
```

asyncê°€ ë¶™ì€ í•¨ìˆ˜ëŠ” ë°˜ë“œì‹œ í”„ë¼ë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ê³ , í”„ë¼ë¯¸ìŠ¤ê°€ ì•„ë‹Œ ê²ƒì€ í”„ë¼ë¯¸ìŠ¤ë¡œ ê°ì‹¸ ë°˜í™˜í•©ë‹ˆë‹¤.
êµ‰ì¥íˆ ê°„ë‹¨í•˜ì£ ? ê·¸ëŸ°ë° asyncê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì€ ì´ë¿ë§Œì´ ì•„ë‹™ë‹ˆë‹¤.

ë˜ ë‹¤ë¥¸ í‚¤ì›Œë“œ awaitëŠ” async í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ë™ì‘í•©ë‹ˆë‹¤. awaitëŠ” ì•„ì£¼ ë©‹ì§„ ë…€ì„ì´ì£ .


### await

- javascriptëŠ” await í‚¤ì›Œë“œë¥¼ ë§Œë‚˜ë©´ promiseê°€ ì²˜ë¦¬ë ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. ê²°ê³¼ëŠ” ê·¸ ì´í›„ ë°˜í™˜ë©ë‹ˆë‹¤.

ğŸŒŸ â†“â†“â†“ .then í˜¸ì¶œì„ ì‚¬ìš©í•œ ì˜ˆì œ  

```javascript
function loadJson(url) {
  return fetch(url)
    .then(response => response.json());
}

function loadGithubUser(name) {
  return fetch(`https://api.github.com/users/${name}`)
    .then(response => response.json());
}

function showAvatar(githubUser) {
  return new Promise(function(resolve, reject) {
    let img = document.createElement('img');
    img.src = githubUser.avatar_url;
    img.className = "promise-avatar-example";
    document.body.append(img);

    setTimeout(() => {
      img.remove();
      resolve(githubUser);
    }, 3000);
  });
}

// í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ë‹¤ì‹œ ë™ì¼ ì‘ì—… ìˆ˜í–‰
loadJson('/article/promise-chaining/user.json')
  .then(user => loadGithubUser(user.name))
  .then(showAvatar)
  .then(githubUser => alert(`Finished showing ${githubUser.name}`));
  // ...
```

ğŸŒŸ â†“â†“â†“ async await ë¥¼ ì‚¬ìš©í•œ ì˜ˆì œ   

```javascript
async function showAvatar() {

  // JSON ì½ê¸°
  let response = await fetch('/article/promise-chaining/user.json');
  let user = await response.json();

  // github ì‚¬ìš©ì ì •ë³´ ì½ê¸°
  let githubResponse = await fetch(`https://api.github.com/users/${user.name}`);
  let githubUser = await githubResponse.json();

  // ì•„ë°”íƒ€ ë³´ì—¬ì£¼ê¸°
  let img = document.createElement('img');
  img.src = githubUser.avatar_url;
  img.className = "promise-avatar-example";
  document.body.append(img);

  // 3ì´ˆ ëŒ€ê¸°
  await new Promise((resolve, reject) => setTimeout(resolve, 3000));

  img.remove();

  return githubUser;
}

showAvatar();
```

â›”ï¸ await ëŠ” ìµœìƒìœ„ ë ˆë²¨ ì½”ë“œì—ì„œëŠ” ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```javascript
// ìµœìƒìœ„ ë ˆë²¨ ì½”ë“œì—ì„  ë¬¸ë²• ì—ëŸ¬ê°€ ë°œìƒí•¨
let response = await fetch('/article/promise-chaining/user.json');
let user = await response.json();
```

â†“â†“â†“ ì•„ë˜ ì½”ë“œëŠ” ê°€ëŠ¥  

```javascript
(async () => {
  let response = await fetch('/article/promise-chaining/user.json');
  let user = await response.json();
  ...
})();
```

ğŸŒŸ í•˜ì§€ë§Œ ìµëª… async í•¨ìˆ˜ë¡œ ì½”ë“œë¥¼ ê°ì‹¸ë©´ ìµœìƒìœ„ ë ˆë²¨ ì½”ë“œì—ë„ awaitë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì—ëŸ¬ í•¸ë“¤ë§
